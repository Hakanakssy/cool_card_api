<h1 id="coolcard-api">CoolCard-API</h1>
<h2 id="api-endpoint-documentation">API Endpoint Documentation</h2>
<p>User Messages Listing API
This API endpoint is used to list messages sent by a specific user or messages sent by employees of a corporate manager.</p>
<h3 id="url">URL</h3>
<pre><code class="lang-http">GET  https:<span class="hljs-regexp">//</span>testusecoolcard.online<span class="hljs-regexp">/account/</span>api<span class="hljs-regexp">/zapier</span>
</code></pre>
<h3 id="parameters">Parameters</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>apikey</td>
<td>String</td>
<td>YES</td>
<td>User&#39;s API key.</td>
</tr>
</tbody>
</table>
<h3 id="headers">Headers</h3>
<ul>
<li>&quot;Content-Type: application/json; charset=utf-8&quot;      <h3 id="response">Response</h3>
<strong>Success (200 OK)</strong><br>A successful response returns all messages from the user or corporate manager in JSON format. Messages are sorted by the date they were sent.</li>
</ul>
<h3 id="response-body">Response Body</h3>
<pre><code class="lang-json">[
    {
        <span class="hljs-attr">"id"</span>: <span class="hljs-number">123</span>,
        <span class="hljs-attr">"uid"</span>: <span class="hljs-string">"John Doe"</span>,
        <span class="hljs-attr">"kartid"</span>: <span class="hljs-string">"abc123"</span>,
        <span class="hljs-attr">"ip"</span>: <span class="hljs-string">"192.168.1.1"</span>,
        <span class="hljs-attr">"country"</span>: <span class="hljs-string">"Turkey"</span>,
        <span class="hljs-attr">"city"</span>: <span class="hljs-string">"Istanbul"</span>,
        <span class="hljs-attr">"browser"</span>: <span class="hljs-string">"Chrome"</span>,
        <span class="hljs-attr">"device"</span>: <span class="hljs-string">"Desktop"</span>,
        <span class="hljs-attr">"ad"</span>: <span class="hljs-string">"Reklam"</span>,
        <span class="hljs-attr">"eposta"</span>: <span class="hljs-string">"john.doe@example.com"</span>,
        <span class="hljs-attr">"telefon"</span>: <span class="hljs-string">"+905555555555"</span>,
        <span class="hljs-attr">"mesaj"</span>: <span class="hljs-string">"Bu bir test mesajıdır."</span>,
        <span class="hljs-attr">"date"</span>: <span class="hljs-string">"2023-08-26T10:45:00Z"</span>,
        <span class="hljs-attr">"okundu"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"company"</span>: <span class="hljs-string">"ABC Corp"</span>
    },
]
</code></pre>
<h3 id="error-cases">Error Cases</h3>
<h4 id="400-bad-request-api-key-is-missing-">400 Bad Request: API key is missing.</h4>
<p>This error occurs if the apikey parameter is not sent or is null.</p>
<pre><code class="lang-json">{
    <span class="hljs-attr">"error"</span>: <span class="hljs-string">"API key is missing."</span>
}
</code></pre>
<h4 id="500-internal-server-error-">500 Internal Server Error:</h4>
<p>This error occurs for server-side issues and when the user cannot be found in the database.  </p>
<p>Example response:</p>
<pre><code class="lang-json">{
    <span class="hljs-attr">"error"</span>: <span class="hljs-string">"User not found."</span>
}
</code></pre>
<p>or</p>
<pre><code class="lang-json">{
    <span class="hljs-attr">"error"</span>: <span class="hljs-string">"Message not found."</span>
}
</code></pre>
<h3 id="use-cases">Use Cases</h3>
<h4 id="getting-user-messages">Getting User Messages</h4>
<p>A user can call the API to retrieve their sent messages as follows:  </p>
<pre><code class="lang-http">GET https:<span class="hljs-regexp">//</span>testusecoolcard.online<span class="hljs-regexp">/account/</span>api<span class="hljs-regexp">/zapier/</span>?apikey=USER_API_KEY
</code></pre>
<p>If the user is a corporate manager, the API response will also include messages from the manager&#39;s employees.</p>
<h3 id="response-sorting">Response Sorting</h3>
<p>Messages are sorted by date (date field). The newest messages appear at the top.  </p>
<h4 id="notes">Notes</h4>
<p>-&quot;id&quot;: Message ID.<br>-&quot;uid&quot;: User&#39;s name and surname.<br>-&quot;kartid&quot;: User&#39;s card ID.<br>-&quot;ip&quot;: Visitor&#39;s IP address.<br>-&quot;country&quot;: Visitor&#39;s country information.<br>-&quot;city&quot;: Visitor&#39;s city.<br>-&quot;browser&quot;: Visitor&#39;s browser information.<br>-&quot;device&quot;: Visitor&#39;s device type.<br>-&quot;ad&quot;: Visitor&#39;s name and surname information.<br>-&quot;eposta&quot;: Visitor&#39;s email address.<br>-&quot;telefon&quot;: Visitor&#39;s phone number.<br>-&quot;mesaj&quot;: Visitor&#39;s message information.<br>-&quot;date&quot;: Visitor&#39;s message date information. (ISO 8601)<br>-&quot;okundu&quot;: Message read/unread status.<br>-&quot;company&quot;: Visitor&#39;s company information.   </p>
<p>-&quot;API key: Used to authenticate the user and retrieve related messages.&quot;<br><em>*</em> If a user is a corporate manager, the response will also include messages from the employees under the manager&#39;s authority.</p>
<h4 id="example-response">Example Response</h4>
<pre><code class="lang-http">GET https:<span class="hljs-regexp">//</span>testusecoolcard.online<span class="hljs-regexp">/account/</span>api<span class="hljs-regexp">/zapier/</span>apikey=your_api_key
</code></pre>
<h4 id="example-response">Example Response</h4>
<pre><code class="lang-json">[
    {
        <span class="hljs-attr">"id"</span>: <span class="hljs-number">456</span>,
        <span class="hljs-attr">"uid"</span>: <span class="hljs-string">"Jane Doe"</span>,
        <span class="hljs-attr">"kartid"</span>: <span class="hljs-string">"def456"</span>,
        <span class="hljs-attr">"ip"</span>: <span class="hljs-string">"192.168.1.2"</span>,
        <span class="hljs-attr">"country"</span>: <span class="hljs-string">"Turkey"</span>,
        <span class="hljs-attr">"city"</span>: <span class="hljs-string">"Ankara"</span>,
        <span class="hljs-attr">"browser"</span>: <span class="hljs-string">"Firefox"</span>,
        <span class="hljs-attr">"device"</span>: <span class="hljs-string">"Mobile"</span>,
        <span class="hljs-attr">"ad"</span>: <span class="hljs-string">"Kampanya"</span>,
        <span class="hljs-attr">"eposta"</span>: <span class="hljs-string">"jane.doe@example.com"</span>,
        <span class="hljs-attr">"telefon"</span>: <span class="hljs-string">"+905556666666"</span>,
        <span class="hljs-attr">"mesaj"</span>: <span class="hljs-string">"This is another test message."</span>,
        <span class="hljs-attr">"date"</span>: <span class="hljs-string">"2023-08-26T11:30:00Z"</span>,
        <span class="hljs-attr">"okundu"</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">"company"</span>: <span class="hljs-string">"XYZ Ltd."</span>
    }
]
</code></pre>
<p>This documentation provides all the necessary information for developers who want to use the API. It explains how to call the API, which parameters to use, and what response to expect.</p>
